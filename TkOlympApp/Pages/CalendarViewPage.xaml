<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:svc="clr-namespace:TkOlympApp.Services"
             xmlns:vm="clr-namespace:TkOlympApp.ViewModels"
             x:Class="TkOlympApp.Pages.CalendarViewPage"
             x:DataType="vm:CalendarViewViewModel"
             Title="{svc:Translate CalendarView}">

    <ContentPage.ToolbarItems>
        <ToolbarItem x:Name="ViewDayAction" Text="{svc:Translate View_1Day}" Priority="0" Order="Primary" Command="{Binding ViewDayCommand}" IsEnabled="{Binding ViewDayEnabled}" />
        <ToolbarItem x:Name="View3DayAction" Text="{svc:Translate View_3Day}" Priority="1" Order="Primary" Command="{Binding View3DayCommand}" IsEnabled="{Binding View3DayEnabled}" />
        <ToolbarItem x:Name="ViewWeekAction" Text="{svc:Translate View_7Day}" Priority="2" Order="Primary" Command="{Binding ViewWeekCommand}" IsEnabled="{Binding ViewWeekEnabled}" />
    </ContentPage.ToolbarItems>

    <Grid Padding="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Top controls: My/All and date navigation -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto" Margin="0,0,0,8">
            <HorizontalStackLayout Grid.Column="0" Spacing="8" VerticalOptions="Center">
                <Button x:Name="TabMyButton" Text="{svc:Translate Tab_My}" Command="{Binding TabMineCommand}" />
                <Button x:Name="TabAllButton" Text="{svc:Translate Tab_All}" Command="{Binding TabAllCommand}" />
            </HorizontalStackLayout>

            <Label x:Name="DateLabel" Text="{Binding DateLabel}" Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center" HorizontalTextAlignment="Center" FontAttributes="Bold" />

                <HorizontalStackLayout Grid.Column="2" Spacing="8" HorizontalOptions="End">
                <Button x:Name="PrevDayButton" Text="◀" Command="{Binding PrevDayCommand}" Style="{StaticResource ButtonSecondary}" />
                <Button x:Name="TodayButton" Text="{svc:Translate Today}" Command="{Binding TodayCommand}" />
                <Button x:Name="NextDayButton" Text="▶" Command="{Binding NextDayCommand}" Style="{StaticResource ButtonSecondary}" />
            </HorizontalStackLayout>
        </Grid>

        <!-- Timeline: left time labels, right absolute layout with event blocks -->
        <ScrollView Grid.Row="1" x:Name="MainScroll" Orientation="Vertical">
            <Grid ColumnDefinitions="Auto,*">
                <!-- remove top padding so hour labels align with the hour lines -->
                <VerticalStackLayout x:Name="TimeLabelsStack" Padding="4,0,4,0" Spacing="0" Grid.Column="0" WidthRequest="56" />
                <ScrollView Grid.Column="1" Orientation="Horizontal">
                    <AbsoluteLayout x:Name="TimelineLayout" BackgroundColor="Transparent" HorizontalOptions="Start" VerticalOptions="Start" />
                </ScrollView>
            </Grid>
        </ScrollView>
    </Grid>

</ContentPage>
